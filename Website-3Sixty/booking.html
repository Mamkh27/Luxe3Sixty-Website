<!DOCTYPE html>
<html lang="en">

<head>


  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
  <script type="text/javascript" src="booking.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script
    src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/page4.css" />

  <title>Booking</title>
</head>

<body>
  <div class="navbar">
    <div class="container">
      <a class="logo" href="/Website-3Sixty/index.html"><span
          style="font-family: IBM Plex Sans; color: black">LUXE </span><span
          style="font-family: Water Brush">3Sixty</span>
      </a>
      <img style="width: 1em" id="mobile-cta" class="mobile-menu"
        src="images/menu.svg" alt="Open
Navigation" />
      <nav>
        <img id="mobile-exit" class="mobile-menu-exit"
          src="images/exit-button.svg" alt="Close Navigation" />

        <ul class="secondary-nav">
          <li class="current">
            <a href="index.html">HOME</a>
          </li>
          <li><a href="how-it-works.html">HOW IT WORKS</a></li>
          <li><a href="#">OUR TEAM</a></li>
          <li class="book-now-cta"><a href="booking.html">BOOK THE BOOTH</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>

  <section class="hero">
    <div class="container">
      <img class="hero-img" src="images/hero-banner.jpg" alt="Banner" />
    </div>
  </section>
  <div class="booking-section">
    <div class="header">
      <p class="title">3Sixty Reservations</p>
      <p class="hour-minimum">2 Hr. Min</p>
    </div>
    <div class="booking-form">
      <div class="header">
        <h2>$160 <span class="hour">/hour</span></h2>
        <button class="review"><span class="rating">â˜… 4.43 </span>(5)</button>
      </div>
      <div class="address">
        <h3>VENUE ADDRESS</h3>
        <h3 class="error" id="address-error-msg">Please enter address in the correct
        format: ## STREET CITY, CA </h3>
        <input id="venue-address" name="venue-address" required
          autocomplete="off" />
      </div>
      <div class="event-date">
        <h3>EVENT DATE</h3>
        <h3 class="error" id="date-error-msg">Please select the event date. </h3>
        <input type="Date" id="myID" />
      </div>
      <div class="time">
        <div class="start-time">
          <h3>START TIME</h3>
          <h3 class="error" id="start-time-error-msg">*Required</h3>
          <input class="start" type="time" id="start-time" />
        </div>
        <h2 class="vl"></h2>
        <div class="end-time">
          <h3>END TIME</h3>
          <h3 class="error" id="end-time-error-msg">*Required</h3>
          <input type="time" id="end-time" />
          <h3 class="error" id="time-error">End time should be atleast two hours after
  start time.</h3>
        </div>
      </div>
      <div class="get-quote-btn">
        <button id="getquoteID" href="#" onclick="getQuoteBtnPressed()"
          class="get-quote">Get Quote</button>
      </div>
      <div class="reserve-btn">
        <button id="reserveID" href="#" onclick="reserveBtnPressed()"
          class="reserve">Reserve</button>
      </div>

      <div class="total-summary" id="total-summary">

        <div class="hours">
          <p class="hours-booked" >Hourly Fee</p>
          <p class="session-cost" id="hourly-fee">$320</p>
        </div>

        <div class="mileage">
          <p class="mileage-cost">Travel Fee</p>
          <p class="gas-cost" id="miles-fee">$25</p>
        </div>

        <h2 class="hl"></h2>

      <div class="total">
        <p>Total</p>
        <p class="quote-value" id="quote-value">$345</p>
      </div>

    </div>
    </div>

    <script>
      flatpickr("#myID", {
        dateFormat: "D F d Y",
      });

      flatpickr("#start-time", {
        enableTime: true,
        noCalendar: true,
        time_24hr: false,
        dateFormat: "h:i:K",
        minuteIncrement: 30,
      });
      flatpickr("#end-time", {
        enableTime: true,
        noCalendar: true,
        time_24hr: false,
        dateFormat: "h:i:K",
        minuteIncrement: 30,
      });


      const mobileBtn = document.getElementById("mobile-cta");
      nav = document.querySelector("nav");
      mobileBtnExit = document.getElementById("mobile-exit");

      mobileBtn.addEventListener("click", () => {
        nav.classList.add("menu-btn");
      });

      mobileBtnExit.addEventListener("click", () => {
        nav.classList.remove("menu-btn");
      });

      var start = document.getElementById("start-time").value;
      var end = document.getElementById("end-time").value;

      let totalHoursbooked = 0; 

      document.getElementById("start-time").onchange = function () { diff(start, end);
        document.getElementById("start-time-error-msg").style.display = "none"; };
      document.getElementById("end-time").onchange = function () { diff(start, end);
        document.getElementById("end-time-error-msg").style.display = "none"; };
        document.getElementById("myID").onchange = function () { 
        document.getElementById("date-error-msg").style.display = "none"; };

      function diff(start, end) {
        start = document.getElementById("start-time").value; //to update time value in each input bar
        end = document.getElementById("end-time").value; //to update time value in each input bar

        start = start.split(":");
        end = end.split(":");
        
        let startNumHR = parseInt(start[0]);
        let endNumHR = parseInt(end[0]);

        let startNumMIN = parseInt(start[1]);
        let endNumMIN = parseInt(end[1]);

        let startNum = startNumHR + (startNumMIN/60);
        let endNum = endNumHR + (endNumMIN/60);

        let outsideHours = "Your entry is outside of booking hours. Please fix the time.";
        let minHours = "End time should be atleast two hours after start time.";
        let maxHours = "Luxe 3Sixty does not book sessions past eight hours.";

        //FINDING SESSION COVERAGE 
        //if outside of booking hours
        if (((startNumHR != 11) && (start[2] == "AM")) || ( (endNumHR != 12) && (end[2] == "AM"))){
          document.getElementById("time-error").style.display = "block"; 
          document.getElementById("time-error").innerHTML= outsideHours;
        } else {
          document.getElementById("time-error").style.display = "none"; 

        // (endNumHR != 11 || endNumHR != 12)
        //if AM-AM or PM-PM
        if(end[2] == start[2]){
          
          //if 1AM-11AM or 1PM-11PM start time
         if(startNumHR != 12){

           //if end time comes before start time OR booking is less than 2 hours
            //if 12PM or 12:30PM is end time 
            if((endNumHR <= startNumHR) || (endNum - startNum < 2)){
                  document.getElementById("time-error").style.display = "block"; 
                  document.getElementById("time-error").innerHTML= minHours;
              }
              else if(endNum - startNum > 8){
                document.getElementById("time-error").style.display = "block"; 
                  document.getElementById("time-error").innerHTML= maxHours;
              }else{
                  document.getElementById("time-error").style.display = "none"; 
               }
          totalHoursbooked = endNum - startNum;  
      } else {
        //Start Time is 12PM
        //if End time is between 9PM-11PM
       
        if(((endNumHR > 8) && (endNumHR <= 11))){
                  document.getElementById("time-error").style.display = "block"; 
                  document.getElementById("time-error").innerHTML= maxHours;
              } 
              
              else if(endNum == 1 || endNum == 1.5 || endNum == 12.5 || (startNum == 12.5 && endNum == 2)){
                document.getElementById("time-error").style.display = "block"; 
                  document.getElementById("time-error").innerHTML= minHours;
              }
              else if(endNum == 12 && (startNum == 12.5 || startNum == 12)){
                document.getElementById("time-error").style.display = "block"; 
                document.getElementById("time-error").innerHTML= minHours;
              }
              else if(end[2] == "AM"){
                document.getElementById("time-error").style.display = "block"; 
                  document.getElementById("time-error").innerHTML= maxHours;
              }
            
                else{
                  document.getElementById("time-error").style.display = "none"; 
               }
          totalHoursbooked = endNum;
        }
        //if AM-PM
      } else if((startNumHR == 11) && (endNumHR == 12)){
        document.getElementById("time-error").style.display = "block"; 
                  document.getElementById("time-error").innerHTML= minHours;
       } else{
         //PM-AM
                  document.getElementById("time-error").style.display = "none"; 
               }
      }
    }
    </script>

</body>

</html>